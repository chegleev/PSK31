class PSK31 {

    private val varicode = mapOf(
        0x00 to "1010101011",
        0x01 to "1011011011",
        0x02 to "1011101101",
        0x03 to "1101110111",
        0x04 to "1011101011",
        0x05 to "1101011111",
        0x06 to "1011101111",
        0x07 to "1011111101",
        0x08 to "1011111111",
        0x09 to "11101111",
        0x0A to "11101",
        0x0B to "1101101111",
        0x0C to "1011011101",
        '\n' to "11111",
        0x0E to "1101110101",
        0x0F to "1110101011",
        ' ' to "1",
        '!' to "111111111",
        '"' to "101011111",
        '#' to "111110101",
        '$' to "111011011",
        '%' to "1011010101",
        '&' to "1010111011",
        '\'' to "101111111",
        '(' to "11111011",
        ')' to "11110111",
        '*' to "101101111",
        '+' to "111011111",
        ',' to "1110101",
        '-' to "110101",
        '.' to "1010111",
        '/' to "110101111",
        '0' to "10110111",
        '1' to "10111101",
        '2' to "11101101",
        '3' to "11111111",
        '4' to "101110111",
        '5' to "101011011",
        '6' to "101101011",
        '7' to "110101101",
        '8' to "110101011",
        '9' to "110110111",
        ':' to "11110101",
        ';' to "110111101",
        '<' to "111101101",
        '=' to "1010101",
        '>' to "111010111",
        '?' to "1010101111",
        '@' to "1010111101",
        'A' to "1111101",
        'B' to "11101011",
        'C' to "10101101",
        'D' to "10110101",
        'E' to "1110111",
        'F' to "11011011",
        'G' to "11111101",
        'H' to "101010101",
        'I' to "1111111",
        'J' to "111111101",
        'K' to "101111101",
        'L' to "11010111",
        'M' to "10111011",
        'N' to "11011101",
        'O' to "10101011",
        'P' to "11010101",
        'Q' to "111011101",
        'R' to "10101111",
        'S' to "1101111",
        'T' to "1101101",
        'U' to "101010111",
        'V' to "110110101",
        'W' to "101011101",
        'X' to "101110101",
        'Y' to "101111011",
        'Z' to "1010101101",
        '[' to "111110111",
        '\\' to "111101111",
        ']' to "111111011",
        '^' to "1010111111",
        '_' to "101101101",
        '`' to "1011011111",
        'a' to "1011",
        'b' to "1011111",
        'c' to "101111",
        'd' to "101101",
        'e' to "11",
        'f' to "111101",
        'g' to "1011011",
        'h' to "101011",
        'i' to "1101",
        'j' to "111101011",
        'k' to "10111111",
        'l' to "11011",
        'm' to "111011",
        'n' to "1111",
        'o' to "111",
        'p' to "111111",
        'q' to "110111111",
        'r' to "10101",
        's' to "10111",
        't' to "101",
        'u' to "110111",
        'v' to "1111011",
        'w' to "1101011",
        'x' to "11011111",
        'y' to "1011101",
        'z' to "111010101",
        '{' to "1010110111",
        '|' to "110111011",
        '}' to "1010110101",
        '~' to "1011010111",
        0x7F to "1110110101"
    )

    fun text(s: String): String {
        var str = ""

        for (element in s) {
            str  += "00" + varicode[element.code.toChar()]
        }

        return "00${str}00"
    }
}